<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°æé¾éŠæˆ² ğŸ¦•</title>
    <style>
        body { 
            margin: 0; 
            padding: 0; 
            font-family: Arial, sans-serif; 
            background: #f7f7f7; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            min-height: 100vh;
            user-select: none;
        }
        #gameContainer { 
            position: relative; 
            width: 800px; 
            height: 400px; 
            border: 3px solid #333; 
            overflow: hidden; 
            background: linear-gradient(to bottom, #87CEEB 0%, #98FB98 70%, #F4A460 100%);
        }
        #game { 
            position: absolute; 
            width: 100%; 
            height: 100%; 
        }
        .dino { 
            position: absolute; 
            bottom: 50px; 
            left: 50px; 
            width: 60px; 
            height: 60px; 
            background: #4a4a4a; 
            border-radius: 10px 10px 50px 50px; 
            transition: bottom 0.3s; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .dino::before { 
            content: 'ğŸ¦•'; 
            position: absolute; 
            top: -10px; 
            left: 10px; 
            font-size: 40px; 
        }
        .dino.jumping { bottom: 150px; }
        .ground { 
            position: absolute; 
            bottom: 0; 
            width: 100%; 
            height: 50px; 
            background: repeating-linear-gradient(90deg, #8B4513, #8B4513 20px, #A0522D 20px, #A0522D 40px); 
            animation: moveGround 2s linear infinite;
        }
        @keyframes moveGround {
            0% { transform: translateX(0); }
            100% { transform: translateX(-40px); }
        }
        .cactus { 
            position: absolute; 
            bottom: 50px; 
            right: -60px; 
            width: 50px; 
            height: 80px; 
            background: linear-gradient(to top, #228B22, #32CD32); 
            border-radius: 20px 20px 5px 5px; 
            animation: moveCactus 3s linear infinite;
        }
        .cactus::before { 
            content: 'ğŸŒµ'; 
            position: absolute; 
            top: -20px; 
            left: 5px; 
            font-size: 50px; 
        }
        @keyframes moveCactus {
            0% { right: -60px; }
            100% { right: 850px; }
        }
        #score { 
            position: absolute; 
            top: 20px; 
            right: 20px; 
            font-size: 24px; 
            font-weight: bold; 
            color: #333; 
            z-index: 10;
        }
        #gameOver { 
            position: absolute; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%); 
            background: rgba(0,0,0,0.9); 
            color: white; 
            padding: 30px; 
            border-radius: 20px; 
            text-align: center; 
            display: none;
        }
        #restart { 
            background: #4CAF50; 
            color: white; 
            border: none; 
            padding: 15px 30px; 
            font-size: 18px; 
            border-radius: 10px; 
            cursor: pointer; 
            margin-top: 20px;
        }
        #instructions { 
            position: absolute; 
            top: 20px; 
            left: 20px; 
            color: #666; 
            font-size: 14px;
        }
        .shake { animation: shake 0.5s; }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <div id="game">
            <div id="dino" class="dino"></div>
            <div class="ground"></div>
            <div id="score">åˆ†æ•¸: 0</div>
            <div id="instructions">æŒ‰ç©ºç™½éµæˆ–é»æ“Šè·³èºï¼</div>
        </div>
        <div id="gameOver">
            <h2>éŠæˆ²çµæŸï¼</h2>
            <p>æœ€çµ‚åˆ†æ•¸: <span id="finalScore">0</span></p>
            <button id="restart">é‡æ–°é–‹å§‹</button>
        </div>
    </div>

    <script>
        const dino = document.getElementById('dino');
        const game = document.getElementById('game');
        const scoreEl = document.getElementById('score');
        const gameOverEl = document.getElementById('gameOver');
        const finalScoreEl = document.getElementById('finalScore');
        const restartBtn = document.getElementById('restart');

        let isJumping = false;
        let gameRunning = true;
        let score = 0;
        let gameSpeed = 3;
        let cactuses = [];

        // è·³èºåŠŸèƒ½
        function jump() {
            if (isJumping || !gameRunning) return;
            isJumping = true;
            dino.classList.add('jumping');
            
            setTimeout(() => {
                dino.classList.remove('jumping');
                isJumping = false;
            }, 600);
        }

        // ç”Ÿæˆä»™äººæŒ
        function spawnCactus() {
            if (!gameRunning) return;
            
            const cactus = document.createElement('div');
            cactus.className = 'cactus';
            game.appendChild(cactus);
            cactuses.push(cactus);
            
            // è‡ªå‹•ç§»é™¤ï¼ˆé€éå‹•ç•«çµæŸï¼‰
            setTimeout(() => {
                if (cactus.parentNode) {
                    cactus.remove();
                    const index = cactuses.indexOf(cactus);
                    if (index > -1) cactuses.splice(index, 1);
                }
            }, 3500);
        }

        // ç¢°æ’åµæ¸¬
        function checkCollision() {
            const dinoRect = dino.getBoundingClientRect();
            
            for (let cactus of cactuses) {
                const cactusRect = cactus.getBoundingClientRect();
                if (
                    dinoRect.left < cactusRect.right &&
                    dinoRect.right > cactusRect.left &&
                    dinoRect.top < cactusRect.bottom &&
                    dinoRect.bottom > cactusRect.top
                ) {
                    gameOver();
                    return;
                }
            }
        }

        // éŠæˆ²çµæŸ
        function gameOver() {
            gameRunning = false;
            gameOverEl.style.display = 'block';
            finalScoreEl.textContent = score;
            dino.classList.add('shake');
        }

        // æ›´æ–°åˆ†æ•¸
        function updateScore() {
            if (!gameRunning) return;
            score++;
            scoreEl.textContent = `åˆ†æ•¸: ${score}`;
            
            // é€Ÿåº¦éš¨åˆ†æ•¸å¢åŠ 
            if (score % 100 === 0) {
                gameSpeed += 0.2;
                // æ›´æ–°ä»™äººæŒå‹•ç•«é€Ÿåº¦
                document.querySelectorAll('.cactus').forEach(c => {
                    c.style.animationDuration = `${3000 / gameSpeed}s`;
                });
            }
        }

        // é‡æ–°é–‹å§‹
        function restart() {
            gameRunning = true;
            score = 0;
            gameSpeed = 3;
            gameOverEl.style.display = 'none';
            dino.classList.remove('shake');
            
            // æ¸…é™¤æ‰€æœ‰ä»™äººæŒ
            cactuses.forEach(c => c.remove());
            cactuses = [];
            
            updateScore();
        }

        // äº‹ä»¶ç›£è½
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                jump();
            }
        });

        game.addEventListener('click', jump);
        restartBtn.addEventListener('click', restart);

        // éŠæˆ²ä¸»å¾ªç’°
        function gameLoop() {
            if (gameRunning) {
                checkCollision();
                updateScore();
            }
            requestAnimationFrame(gameLoop);
        }

        // é–‹å§‹éŠæˆ²å¾ªç’°
        setInterval(spawnCactus, 2000); // æ¯2ç§’ç”Ÿæˆä»™äººæŒ
        gameLoop();
    </script>
</body>
</html>

